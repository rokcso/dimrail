# Dimrail: Stash Config by rokcso
# GitHub: https://github.com/rokcso/dimrail
# Author: https://rokcso.com
# Update: 2025-10-31

# ██████╗  ██╗ ███╗   ███╗ ██████╗   █████╗  ██╗ ██╗
# ██╔══██╗ ██║ ████╗ ████║ ██╔══██╗ ██╔══██╗ ██║ ██║
# ██║  ██║ ██║ ██╔████╔██║ ██████╔╝ ███████║ ██║ ██║
# ██║  ██║ ██║ ██║╚██╔╝██║ ██╔══██╗ ██╔══██║ ██║ ██║
# ██████╔╝ ██║ ██║ ╚═╝ ██║ ██║  ██║ ██║  ██║ ██║ ███████╗
# ╚═════╝  ╚═╝ ╚═╝     ╚═╝ ╚═╝  ╚═╝ ╚═╝  ╚═╝ ╚═╝ ╚══════╝

# 代理服务提供商
proxy-providers:
  ProxyProviderA:
    url: https://rokcso.com/ # 用你的订阅链接替换
    interval: 10800
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 10
  ProxyProviderB:
    url: https://rokcso.com/ # 用你的订阅链接替换
    interval: 10800
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 10

# 代理组
proxy-groups:
  - name: 默认线路
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png
    type: select
    proxies:
      - 自动选择
      - HK 香港
      - SG 新加坡
      - JP 日本
      - TW 台湾
      - US 美国
      - UK 英国
      - 其他线路
      - DIRECT

  - name: AI Service
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/AI.png
    type: select
    proxies:
      - US 美国
      - UK 英国
      - SG 新加坡
      - JP 日本
      - HK 香港
      - TW 台湾
      - 其他线路
      - 手动选择

  - name: Apple
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Apple.png
    type: select
    proxies:
      - HK 香港
      - US 美国
      - SG 新加坡
      - JP 日本
      - TW 台湾
      - UK 英国
      - 其他线路
      - 手动选择

  - name: Telegram
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png
    type: select
    proxies:
      - SG 新加坡
      - HK 香港
      - JP 日本
      - TW 台湾
      - US 美国
      - UK 英国
      - 其他线路
      - 手动选择

  - name: Spotify
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png
    type: select
    proxies:
      - HK 香港
      - SG 新加坡
      - US 美国
      - JP 日本
      - TW 台湾
      - UK 英国
      - 其他线路
      - 手动选择

  - name: YouTube
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png
    type: select
    proxies:
      - HK 香港
      - SG 新加坡
      - TW 台湾
      - JP 日本
      - US 美国
      - UK 英国
      - 其他线路
      - 手动选择

  - name: GitHub
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/GitHub.png
    type: select
    proxies:
      - HK 香港
      - SG 新加坡
      - JP 日本
      - TW 台湾
      - US 美国
      - UK 英国
      - 其他线路
      - 手动选择
      - DIRECT

  # 基于地区分组
  - name: HK 香港
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Hong_Kong.png
    type: select
    include-all: true
    filter: "(?i)(澳门|🇲🇴|Macau|Macao|香港|🇭🇰|Hong Kong|HK|HKG)"
    proxies:
      - HK-Auto
  - name: HK-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "(?i)(澳门|🇲🇴|Macau|Macao|香港|🇭🇰|Hong Kong|HK|HKG)"

  - name: SG 新加坡
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Singapore.png
    type: select
    include-all: true
    filter: "新加坡|坡|狮城|🇸🇬|SG|(?i)Singapore"
    proxies:
      - SG-Auto
  - name: SG-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "新加坡|坡|狮城|🇸🇬|SG|(?i)Singapore"

  - name: JP 日本
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Japan.png
    type: select
    include-all: true
    filter: "(?i)(日本|🇯🇵|东京|大阪|JP|Japan|Tokyo|Osaka)"
    proxies:
      - JP-Auto
  - name: JP-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "(?i)(日本|🇯🇵|东京|大阪|JP|Japan|Tokyo|Osaka)"

  - name: TW 台湾
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Taiwan.png
    type: select
    include-all: true
    filter: "(?i)(台湾|🇹🇼|TW|Taiwan|台-|台_|Taipei|TPE)"
    proxies:
      - TW-Auto
  - name: TW-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "(?i)(台湾|🇹🇼|TW|Taiwan|台-|台_|Taipei|TPE)"

  - name: US 美国
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png
    type: select
    include-all: true
    filter: "(?i)(美国|🇺🇸|US|USA|United States|America|Los Angeles|New York|San Francisco|Seattle|Chicago)"
    proxies:
      - US-Auto
  - name: US-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "(?i)(美国|🇺🇸|US|USA|United States|America|Los Angeles|New York|San Francisco|Seattle|Chicago)"

  - name: UK 英国
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_Kingdom.png
    type: select
    include-all: true
    filter: "(?i)(英国|🇬🇧|UK|United Kingdom|Britain|伦敦|London|Manchester|Birmingham)"
    proxies:
      - UK-Auto
  - name: UK-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "(?i)(英国|🇬🇧|UK|United Kingdom|Britain|伦敦|London|Manchester|Birmingham)"

  - name: 其他线路
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/World_Map.png
    type: select
    include-all: true
    filter: "(?i)^(?!.*(?:🇭🇰|香港|HK|Hong Kong|🇹🇼|台湾|臺灣|TW|Taiwan|🇯🇵|日本|JP|Japan|🇰🇷|韩国|KR|Korea|🇺🇸|美国|US|USA|America|🇸🇬|新加坡|SG|Singapore|🇨🇳|中国|CN|China|🇬🇧|英国|UK|Britain|London|\\.com\\b|群|邀请|返利|循环|官网|客服|网站|网址|获取|订阅|流量|到期|机场|下次|版本|官址|备用|过期|已用|联系|邮箱|工单|贩卖|通知|倒卖|防止|国内|地址|频道|无法|说明|使用|提示|特别|访问|支持|教程|关注|更新|作者|加入|(?:\\b(?:USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\\b)|(?:\\d{4}-\\d{2}-\\d{2}|\\d+G))).*$"
    proxies:
      - 其他-Auto
  - name: 其他-Auto
    hidden: true
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "(?i)^(?!.*(?:🇭🇰|香港|HK|Hong Kong|🇹🇼|台湾|臺灣|TW|Taiwan|🇯🇵|日本|JP|Japan|🇰🇷|韩国|KR|Korea|🇺🇸|美国|US|USA|America|🇸🇬|新加坡|SG|Singapore|🇨🇳|中国|CN|China|🇬🇧|英国|UK|Britain|London|\\.com\\b|群|邀请|返利|循环|官网|客服|网站|网址|获取|订阅|流量|到期|机场|下次|版本|官址|备用|过期|已用|联系|邮箱|工单|贩卖|通知|倒卖|防止|国内|地址|频道|无法|说明|使用|提示|特别|访问|支持|教程|关注|更新|作者|加入|(?:\\b(?:USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\\b)|(?:\\d{4}-\\d{2}-\\d{2}|\\d+G))).*$"

  # 不限制地区
  - name: 自动选择
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Auto.png
    type: url-test
    interval: 300
    timeout: 5
    lazy: true
    tolerance: 100
    include-all: true
    filter: "^(?!.*(?:群|邀请|返利|循环|官网|客服|网站|网址|获取|订阅|流量|到期|机场|下次|版本|官址|备用|过期|已用|联系|邮箱|工单|贩卖|通知|倒卖|防止|国内|地址|频道|无法|说明|使用|提示|特别|访问|支持|教程|关注|更新|作者|加入|\\.com\\b|(?:\\b(?:USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\\b)|(?:\\d{4}-\\d{2}-\\d{2}|\\d+G))).*$"

  - name: 手动选择
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Static.png
    type: select
    include-all: true
    filter: "^(?!.*(?:群|邀请|返利|循环|官网|客服|网站|网址|获取|订阅|流量|到期|机场|下次|版本|官址|备用|过期|已用|联系|邮箱|工单|贩卖|通知|倒卖|防止|国内|地址|频道|无法|说明|使用|提示|特别|访问|支持|教程|关注|更新|作者|加入|\\.com\\b|(?:\\b(?:USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\\b)|(?:\\d{4}-\\d{2}-\\d{2}|\\d+G))).*$"

# 规则提供商
rule-providers:
  lancidr:
    type: http
    behavior: ipcidr
    format: yaml
    url: https://raw.githubusercontent.com/rokcso/dimrail/refs/heads/main/rules/lancidr.yaml
    path: ./rulset/lancidr.yaml
    interval: 604800
  reject:
    type: http
    behavior: domain
    format: yaml
    url: https://anti-ad.net/clash.yaml
    path: ./rulset/reject.yaml
    interval: 86400
  ai-offshore:
    type: http
    behavior: domain
    format: yaml
    url: https://raw.githubusercontent.com/rokcso/dimrail/refs/heads/main/rules/ai-offshore.yaml
    path: ./rulset/ai-offshore.yaml
    interval: 604800
  apple-offshore:
    type: http
    behavior: domain
    format: yaml
    url: https://raw.githubusercontent.com/rokcso/dimrail/refs/heads/main/rules/apple-offshore.yaml
    path: ./rulset/apple-offshore.yaml
    interval: 604800
  apple-cn:
    type: http
    behavior: domain
    format: yaml
    url: https://raw.githubusercontent.com/rokcso/dimrail/refs/heads/main/rules/apple-cn.yaml
    path: ./rulset/apple-cn.yaml
    interval: 604800
  github:
    type: http
    behavior: domain
    format: yaml
    url: https://raw.githubusercontent.com/rokcso/dimrail/refs/heads/main/rules/github.yaml
    path: ./rulset/github.yaml
    interval: 604800
  telegram:
    type: http
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.list
    interval: 86400
  spotify:
    type: http
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/spotify.list
    interval: 86400
  youtube:
    type: http
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.list
    interval: 86400

# 规则配置
rules:
  - RULE-SET,lancidr,DIRECT
  - DOMAIN-SUFFIX,appsflyer.com,默认线路
  - RULE-SET,reject,REJECT
  - DOMAIN-SUFFIX,larksuite.com,DIRECT
  - RULE-SET,ai-offshore,AI Service
  - RULE-SET,apple-cn,DIRECT
  - RULE-SET,apple-offshore,Apple
  - RULE-SET,github,GitHub
  - RULE-SET,telegram,Telegram
  - RULE-SET,spotify,Spotify
  - RULE-SET,youtube,YouTube
  - GEOSITE,cn,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,默认线路

# 规则模式：rule/global/direct
mode: rule

# 5 个日志级别：silent/info/warning/error/debug
# 日志级别越高日志输出量越大，越倾向于调试，若需要请自行开启
log-level: info

# DNS 服务器配置
dns:
  # 以下填写的 DNS 服务器将会被用来解析 DNS 服务的域名
  # 仅填写 DNS 服务器的 IP 地址
  # 所有 DNS 请求将会直接发送到服务器，不经过任何代理
  # Stash 会使用最先获得的解析记录回复 DNS 请求
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  # 在以下列表的域名将不会被解析为 fake ip，这些域名相关的解析请求将会返回它们真实的 IP 地址
  fake-ip-filter:
    # - "*"
    - "*.lan"
    - "*.local"
    - "localhost.ptlogin2.qq.com"
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "xbox.*.microsoft.com"
    - "+.xboxlive.com"
    - "+.cmpassport.com"
    - "id6.me"
    - "open.e.189.cn"
    - "mdn.open.wo.cn"
    - "opencloud.wostore.cn"
    - "auth.wosms.cn"
    - "+.10099.com.cn"
  respect-rules: true
  # ipv6: false
