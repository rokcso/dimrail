# GitHub: https://github.com/rokcso/dimrail
# Stash Config by rokcso
# Update: 2025-08-15

# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     
# â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘     
# â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘     
# â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘     
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
# â•šâ•â•â•â•â•â•  â•šâ•â• â•šâ•â•     â•šâ•â• â•šâ•â•  â•šâ•â• â•šâ•â•  â•šâ•â• â•šâ•â• â•šâ•â•â•â•â•â•â•

# è§„åˆ™æ¨¡å¼ï¼šrule/global/direct
mode: rule

# 5 ä¸ªæ—¥å¿—çº§åˆ«ï¼šsilent/info/warning/error/debug
# æ—¥å¿—çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯
log-level: info

# DNS æœåŠ¡å™¨é…ç½®
dns:
  # ä»¥ä¸‹å¡«å†™çš„ DNS æœåŠ¡å™¨å°†ä¼šè¢«ç”¨æ¥è§£æ DNS æœåŠ¡çš„åŸŸå
  # ä»…å¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
    # - 119.29.29.29
    # - system # ä½¿ç”¨ iOS ç³»ç»Ÿ DNS
    # æ”¯æŒ UDP/TCP/DoT/DoH åè®®çš„ DNS æœåŠ¡ï¼Œå¯ä»¥æŒ‡æ˜å…·ä½“çš„è¿æ¥ç«¯å£å·
    # æ‰€æœ‰ DNS è¯·æ±‚å°†ä¼šç›´æ¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ä»£ç†
    # Stash ä¼šä½¿ç”¨æœ€å…ˆè·å¾—çš„è§£æè®°å½•å›å¤ DNS è¯·æ±‚
  nameserver:
    # ä¸å»ºè®®é…ç½®è¶…è¿‡ 2 ä¸ª DNS æœåŠ¡å™¨ï¼Œä¼šå¢åŠ ç³»ç»ŸåŠŸè€—
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    # - quic://dns.adguard.com:853
    # - doq://test.dns.nextdns.io:853
    # - system # ä½¿ç”¨ç³»ç»Ÿ DNS
  # åœ¨ä»¥ä¸‹åˆ—è¡¨çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸º fake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"

# ä»£ç†æœåŠ¡æä¾›å•†
proxy-providers:
  ProxyProviderA:
    url:  # ç”¨ä½ çš„è®¢é˜…é“¾æ¥æ›¿æ¢
    interval: 86400
    benchmark-url: http://www.gstatic.com/generate_204
    benchmark-timeout: 10

# ä»£ç†ç»„
proxy-groups:
  - name: é»˜è®¤èŠ‚ç‚¹
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - HK é¦™æ¸¯
      - TW å°æ¹¾
      - SG æ–°åŠ å¡
      - JP æ—¥æœ¬
      - US ç¾å›½
      - KR éŸ©å›½
      - å…¶å®ƒåœ°åŒº
      - æ‰‹åŠ¨é€‰æ‹©
      - DIRECT
  
  - name: AI Service
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ChatGPT.png
    type: select
    proxies:
      - é»˜è®¤èŠ‚ç‚¹
      - HK é¦™æ¸¯
      - TW å°æ¹¾
      - SG æ–°åŠ å¡
      - JP æ—¥æœ¬
      - US ç¾å›½
      - KR éŸ©å›½
      - å…¶å®ƒåœ°åŒº
      - è‡ªåŠ¨é€‰æ‹©
      - æ‰‹åŠ¨é€‰æ‹©
      - DIRECT

  # åŸºäºåœ°åŒºåˆ†ç»„
  - name: HK é¦™æ¸¯
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Hong_Kong.png
    type: select
    use:
      - ProxyProviderA
    filter: "æ¾³é—¨|ğŸ‡²ğŸ‡´|æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong"
    proxies:
      - HK-Auto
  - name: HK-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "æ¾³é—¨|ğŸ‡²ğŸ‡´|æ¸¯|ğŸ‡­ğŸ‡°|HK|(?i)Hong"
  - name: TW å°æ¹¾
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Taiwan.png
    type: select
    use:
      - ProxyProviderA
    filter: "å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan"
    proxies:
      - TW-Auto
  - name: TW-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "å°|ğŸ‡¹ğŸ‡¼|æ¹¾|TW|(?i)Taiwan"
  - name: SG æ–°åŠ å¡
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Singapore.png
    type: select
    use:
      - ProxyProviderA
    filter: "æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore"
    proxies:
      - SG-Auto
  - name: SG-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|SG|(?i)Singapore"
  - name: JP æ—¥æœ¬
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Japan.png
    type: select
    use:
      - ProxyProviderA
    filter: "æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan"
    proxies:
      - JP-Auto
  - name: JP-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|JP|(?i)Japan"
  - name: US ç¾å›½
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png
    type: select
    use:
      - ProxyProviderA
    filter: "ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|America"
    proxies:
      - US-Auto
  - name: US-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "ç¾|ğŸ‡ºğŸ‡²|US|(?i)States|America"
  - name: KR éŸ©å›½
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Korea.png
    type: select
    use:
      - ProxyProviderA
    filter: "éŸ©|ğŸ‡°ğŸ‡·|kr|(?i)Korea"
    proxies:
      - KR-Auto
  - name: KR-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "éŸ©|ğŸ‡°ğŸ‡·|kr|(?i)Korea"
  - name: å…¶å®ƒåœ°åŒº
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/World_Map.png
    type: select
    use:
      - ProxyProviderA
    filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hong|å°|tw|taiwan|æ—¥æœ¬|jp|japan|éŸ©|kr|korea|ç¾|us|states|æ–°åŠ å¡|sg|singapore)).*"
    proxies:
      - å…¶ä»–-Auto
  - name: å…¶ä»–-Auto
    hidden: true
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
    filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hong|å°|tw|taiwan|æ—¥æœ¬|jp|japan|éŸ©|kr|korea|ç¾|us|states|æ–°åŠ å¡|sg|singapore)).*"
  # ä¸é™åˆ¶åœ°åŒº
  - name: è‡ªåŠ¨é€‰æ‹©
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Auto.png
    type: url-test
    interval: 120
    lazy: true
    tolerance: 50
    include-all: true
  - name: æ‰‹åŠ¨é€‰æ‹©
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Static.png
    type: select
    interval: 120
    lazy: true
    include-all: true

# è§„åˆ™æä¾›å•†
rule-providers:
  reject:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    interval: 86400
  category-ai-chat-!cn:
    type: http
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ai-chat-!cn.list
    interval: 86400
  apple:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
    interval: 86400 

# è§„åˆ™é…ç½®
rules:
  - DOMAIN-SUFFIX,appsflyer.com,é»˜è®¤èŠ‚ç‚¹
  - RULE-SET,reject,REJECT
  - RULE-SET,category-ai-chat-!cn,AI Service
  - RULE-SET,apple,DIRECT
  - DOMAIN-SUFFIX,larksuite.com,DIRECT
  - GEOIP,CN,DIRECT
  - GEOSITE,CN,DIRECT
  - MATCH,é»˜è®¤èŠ‚ç‚¹